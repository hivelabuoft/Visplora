// Income data for London boroughs from 1999-2023
// Data source: income-of-tax-payers.csv

export interface IncomeData {
  borough: string;
  code: string;
  meanIncomeByYear: { [year: string]: number };
  medianIncomeByYear: { [year: string]: number };
}

export interface IncomeTimelineData {
  year: string;
  meanIncome: number;
  medianIncome: number;
  borough: string;
}

// Complete income data for all 33 London boroughs from 1999-2023 (2008 added for financial crisis context)
const incomeDataRaw: IncomeData[] = [
  {
    borough: "City of London",
    code: "E09000001",
    meanIncomeByYear: {
      "1999": 109800, "2000": 137000, "2001": 92900, "2002": 78700, "2003": 85800,
      "2004": 95600, "2005": 90600, "2006": 99200, "2007": 102000, "2008": 115000, "2009": 137000,
      "2010": 127000, "2011": 117000, "2012": 131000, "2013": 151000, "2014": 144000,
      "2015": 142000, "2016": 157000, "2017": 148000, "2018": 142000, "2019": 128000,
      "2020": 142000, "2021": 167000, "2022": 147000, "2023": 155000
    },
    medianIncomeByYear: {
      "1999": 40400, "2000": 65000, "2001": 38300, "2002": 37000, "2003": 39200,
      "2004": 44400, "2005": 49300, "2006": 49000, "2007": 58500, "2008": 60000, "2009": 61900,
      "2010": 61300, "2011": 51600, "2012": 58300, "2013": 65300, "2014": 61100,
      "2015": 60000, "2016": 57300, "2017": 60000, "2018": 55200, "2019": 54200,
      "2020": 56700, "2021": 62200, "2022": 60700, "2023": 62000
    }
  },
  {
    borough: "Barking and Dagenham",
    code: "E09000002",
    meanIncomeByYear: {
      "1999": 16200, "2000": 18100, "2001": 18600, "2002": 19100, "2003": 18800,
      "2004": 19400, "2005": 20600, "2006": 20600, "2007": 21300, "2008": 21800, "2009": 23100,
      "2010": 22500, "2011": 22800, "2012": 23700, "2013": 24600, "2014": 25500,
      "2015": 25900, "2016": 26700, "2017": 27400, "2018": 28800, "2019": 29400,
      "2020": 30800, "2021": 31800, "2022": 33300, "2023": 35200
    },
    medianIncomeByYear: {
      "1999": 15100, "2000": 15600, "2001": 16200, "2002": 17000, "2003": 17400,
      "2004": 16600, "2005": 17900, "2006": 17600, "2007": 18600, "2008": 18900, "2009": 19400,
      "2010": 19400, "2011": 19600, "2012": 20100, "2013": 21000, "2014": 21800,
      "2015": 22100, "2016": 23300, "2017": 23900, "2018": 25200, "2019": 25700,
      "2020": 26800, "2021": 28000, "2022": 28600, "2023": 30000
    }
  },
  {
    borough: "Barnet",
    code: "E09000003",
    meanIncomeByYear: {
      "1999": 26800, "2000": 30800, "2001": 30400, "2002": 32300, "2003": 33900,
      "2004": 32800, "2005": 35600, "2006": 36700, "2007": 38700, "2008": 40000, "2009": 41600,
      "2010": 38800, "2011": 39200, "2012": 41000, "2013": 45500, "2014": 45800,
      "2015": 49000, "2016": 48600, "2017": 49500, "2018": 51600, "2019": 51600,
      "2020": 54400, "2021": 59100, "2022": 59800, "2023": 62000
    },
    medianIncomeByYear: {
      "1999": 18700, "2000": 19400, "2001": 18700, "2002": 19700, "2003": 20000,
      "2004": 19900, "2005": 21200, "2006": 20400, "2007": 22000, "2008": 22500, "2009": 24300,
      "2010": 24100, "2011": 24200, "2012": 25800, "2013": 26800, "2014": 27100,
      "2015": 27700, "2016": 28800, "2017": 28700, "2018": 29900, "2019": 30700,
      "2020": 32200, "2021": 33500, "2022": 34400, "2023": 36000
    }
  },
  {
    borough: "Bexley",
    code: "E09000004",
    meanIncomeByYear: {
      "1999": 20500, "2000": 19800, "2001": 22000, "2002": 21500, "2003": 21900,
      "2004": 22300, "2005": 24000, "2006": 24600, "2007": 26700, "2008": 27000, "2009": 27600,
      "2010": 27400, "2011": 28300, "2012": 28600, "2013": 29600, "2014": 30200,
      "2015": 30900, "2016": 32300, "2017": 33500, "2018": 34600, "2019": 36000,
      "2020": 36400, "2021": 38000, "2022": 40900, "2023": 43000
    },
    medianIncomeByYear: {
      "1999": 17200, "2000": 17300, "2001": 18300, "2002": 17800, "2003": 17700,
      "2004": 17700, "2005": 19400, "2006": 19600, "2007": 19800, "2008": 20500, "2009": 22100,
      "2010": 22600, "2011": 22300, "2012": 23100, "2013": 24400, "2014": 24400,
      "2015": 24500, "2016": 26100, "2017": 26900, "2018": 26900, "2019": 28000,
      "2020": 28800, "2021": 29300, "2022": 31800, "2023": 33500
    }
  },
  {
    borough: "Brent",
    code: "E09000005",
    meanIncomeByYear: {
      "1999": 20000, "2000": 22200, "2001": 21100, "2002": 21700, "2003": 22500,
      "2004": 21800, "2005": 23200, "2006": 24600, "2007": 24700, "2008": 25500, "2009": 26100,
      "2010": 26700, "2011": 27400, "2012": 28300, "2013": 29700, "2014": 31200,
      "2015": 32600, "2016": 34100, "2017": 35400, "2018": 36300, "2019": 37800,
      "2020": 40400, "2021": 44100, "2022": 43600, "2023": 46000
    },
    medianIncomeByYear: {
      "1999": 16500, "2000": 16800, "2001": 16500, "2002": 16400, "2003": 16800,
      "2004": 16500, "2005": 17600, "2006": 18200, "2007": 18300, "2008": 18800, "2009": 19600,
      "2010": 19700, "2011": 20200, "2012": 20600, "2013": 21300, "2014": 22700,
      "2015": 23200, "2016": 24100, "2017": 24700, "2018": 25600, "2019": 26200,
      "2020": 27200, "2021": 30000, "2022": 29400, "2023": 31000
    }
  },
  {
    borough: "Bromley",
    code: "E09000006",
    meanIncomeByYear: {
      "1999": 25100, "2000": 26400, "2001": 27400, "2002": 27700, "2003": 29200,
      "2004": 29200, "2005": 31400, "2006": 32800, "2007": 34400, "2008": 35500, "2009": 36500,
      "2010": 35900, "2011": 36400, "2012": 37200, "2013": 39000, "2014": 40400,
      "2015": 43500, "2016": 44000, "2017": 45500, "2018": 46600, "2019": 48200,
      "2020": 49300, "2021": 54500, "2022": 56900, "2023": 60000
    },
    medianIncomeByYear: {
      "1999": 18500, "2000": 19500, "2001": 19100, "2002": 20100, "2003": 21400,
      "2004": 20900, "2005": 22400, "2006": 23000, "2007": 23200, "2008": 24000, "2009": 24900,
      "2010": 25800, "2011": 25100, "2012": 26900, "2013": 27200, "2014": 28100,
      "2015": 29800, "2016": 30400, "2017": 32000, "2018": 32800, "2019": 33700,
      "2020": 33800, "2021": 35800, "2022": 38100, "2023": 40000
    }
  },
  {
    borough: "Camden",
    code: "E09000007",
    meanIncomeByYear: {
      "1999": 39000, "2000": 40000, "2001": 42800, "2002": 43000, "2003": 45700,
      "2004": 50200, "2005": 56200, "2006": 60200, "2007": 69800, "2008": 72000, "2009": 68900,
      "2010": 67100, "2011": 69300, "2012": 71200, "2013": 78900, "2014": 79200,
      "2015": 85000, "2016": 88000, "2017": 92600, "2018": 87400, "2019": 96900,
      "2020": 107000, "2021": 119000, "2022": 112000, "2023": 118000
    },
    medianIncomeByYear: {
      "1999": 20500, "2000": 19700, "2001": 19800, "2002": 21700, "2003": 21300,
      "2004": 23200, "2005": 24200, "2006": 25900, "2007": 26900, "2008": 28000, "2009": 28400,
      "2010": 29400, "2011": 30400, "2012": 31600, "2013": 32000, "2014": 33100,
      "2015": 34400, "2016": 35500, "2017": 37300, "2018": 35600, "2019": 38200,
      "2020": 38900, "2021": 38900, "2022": 40600, "2023": 42500
    }
  },
  {
    borough: "Croydon",
    code: "E09000008",
    meanIncomeByYear: {
      "1999": 21500, "2000": 22100, "2001": 23500, "2002": 23400, "2003": 23300,
      "2004": 24300, "2005": 25800, "2006": 27200, "2007": 28100, "2008": 28900, "2009": 29700,
      "2010": 29000, "2011": 29700, "2012": 30700, "2013": 31800, "2014": 32600,
      "2015": 34200, "2016": 33800, "2017": 35600, "2018": 36500, "2019": 37800,
      "2020": 38300, "2021": 40900, "2022": 41900, "2023": 44300
    },
    medianIncomeByYear: {
      "1999": 16700, "2000": 17300, "2001": 18300, "2002": 18000, "2003": 19000,
      "2004": 18600, "2005": 19600, "2006": 20700, "2007": 20900, "2008": 22000, "2009": 23100,
      "2010": 22000, "2011": 22700, "2012": 23900, "2013": 24300, "2014": 25100,
      "2015": 26300, "2016": 25600, "2017": 27500, "2018": 27800, "2019": 29400,
      "2020": 29100, "2021": 30400, "2022": 31800, "2023": 33500
    }
  },
  {
    borough: "Ealing",
    code: "E09000009",
    meanIncomeByYear: {
      "1999": 22800, "2000": 23800, "2001": 25200, "2002": 25400, "2003": 26100,
      "2004": 26500, "2005": 26900, "2006": 28700, "2007": 30000, "2008": 29400, "2009": 32400,
      "2010": 30700, "2011": 32000, "2012": 32600, "2013": 34500, "2014": 35300,
      "2015": 37000, "2016": 37300, "2017": 39700, "2018": 39800, "2019": 42700,
      "2020": 44100, "2021": 46800, "2022": 48700, "2023": 51200
    },
    medianIncomeByYear: {
      "1999": 16400, "2000": 17000, "2001": 17500, "2002": 18900, "2003": 19400,
      "2004": 19100, "2005": 19000, "2006": 19900, "2007": 20200, "2008": 22300, "2009": 21800,
      "2010": 20800, "2011": 21300, "2012": 22700, "2013": 23200, "2014": 24600,
      "2015": 24900, "2016": 26100, "2017": 26700, "2018": 26400, "2019": 28200,
      "2020": 29500, "2021": 30900, "2022": 31500, "2023": 33000
    }
  },
  {
    borough: "Enfield",
    code: "E09000010",
    meanIncomeByYear: {
      "1999": 21500, "2000": 20800, "2001": 23100, "2002": 24100, "2003": 24200,
      "2004": 23900, "2005": 25800, "2006": 27100, "2007": 28100, "2008": 29100, "2009": 30600,
      "2010": 29000, "2011": 30400, "2012": 30800, "2013": 32900, "2014": 34400,
      "2015": 34600, "2016": 34600, "2017": 36200, "2018": 37200, "2019": 39500,
      "2020": 40700, "2021": 42800, "2022": 42800, "2023": 45100
    },
    medianIncomeByYear: {
      "1999": 16100, "2000": 15900, "2001": 17500, "2002": 18100, "2003": 18200,
      "2004": 17000, "2005": 18900, "2006": 19500, "2007": 19900, "2008": 22800, "2009": 22100,
      "2010": 20900, "2011": 22300, "2012": 22700, "2013": 23900, "2014": 25300,
      "2015": 25100, "2016": 25400, "2017": 26300, "2018": 27300, "2019": 28300,
      "2020": 29500, "2021": 29900, "2022": 31300, "2023": 33000
    }
  },
  {
    borough: "Greenwich",
    code: "E09000011",
    meanIncomeByYear: {
      "1999": 20700, "2000": 22400, "2001": 24000, "2002": 22900, "2003": 23300,
      "2004": 23100, "2005": 25500, "2006": 27400, "2007": 29900, "2008": 31500, "2009": 32800,
      "2010": 30000, "2011": 31000, "2012": 31500, "2013": 34200, "2014": 34800,
      "2015": 37300, "2016": 37500, "2017": 40200, "2018": 41300, "2019": 44700,
      "2020": 46400, "2021": 48900, "2022": 50700, "2023": 53500
    },
    medianIncomeByYear: {
      "1999": 16600, "2000": 16000, "2001": 18600, "2002": 17000, "2003": 17800,
      "2004": 17100, "2005": 18200, "2006": 19200, "2007": 20500, "2008": 24000, "2009": 21400,
      "2010": 21300, "2011": 21800, "2012": 22600, "2013": 23500, "2014": 24600,
      "2015": 25600, "2016": 26000, "2017": 27600, "2018": 27400, "2019": 30100,
      "2020": 30600, "2021": 31800, "2022": 33800, "2023": 35500
    }
  },
  {
    borough: "Hackney",
    code: "E09000012",
    meanIncomeByYear: {
      "1999": 18700, "2000": 20000, "2001": 22400, "2002": 21300, "2003": 21500,
      "2004": 22900, "2005": 24600, "2006": 25300, "2007": 27900, "2008": 29000, "2009": 29800,
      "2010": 29500, "2011": 31200, "2012": 32700, "2013": 36300, "2014": 37100,
      "2015": 40200, "2016": 40600, "2017": 43100, "2018": 44900, "2019": 47200,
      "2020": 49400, "2021": 52500, "2022": 54600, "2023": 57500
    },
    medianIncomeByYear: {
      "1999": 14400, "2000": 15800, "2001": 17700, "2002": 17300, "2003": 17000,
      "2004": 18000, "2005": 19300, "2006": 18400, "2007": 20900, "2008": 21700, "2009": 22200,
      "2010": 22300, "2011": 23300, "2012": 24300, "2013": 26000, "2014": 26000,
      "2015": 27800, "2016": 28000, "2017": 29400, "2018": 29600, "2019": 32400,
      "2020": 32800, "2021": 34300, "2022": 34300, "2023": 36000
    }
  },
  {
    borough: "Hammersmith and Fulham",
    code: "E09000013",
    meanIncomeByYear: {
      "1999": 34900, "2000": 35400, "2001": 37500, "2002": 35800, "2003": 36200,
      "2004": 38300, "2005": 43100, "2006": 46200, "2007": 48600, "2008": 48200, "2009": 52900,
      "2010": 52000, "2011": 52700, "2012": 54300, "2013": 61300, "2014": 62000,
      "2015": 69700, "2016": 66600, "2017": 73200, "2018": 72600, "2019": 75900,
      "2020": 77800, "2021": 83600, "2022": 86700, "2023": 91000
    },
    medianIncomeByYear: {
      "1999": 19900, "2000": 19300, "2001": 21000, "2002": 20800, "2003": 19600,
      "2004": 20800, "2005": 23000, "2006": 22800, "2007": 23600, "2008": 35500, "2009": 26700,
      "2010": 27100, "2011": 27600, "2012": 27600, "2013": 30100, "2014": 30100,
      "2015": 32000, "2016": 32300, "2017": 33200, "2018": 34100, "2019": 35800,
      "2020": 36200, "2021": 37000, "2022": 38300, "2023": 40500
    }
  },
  {
    borough: "Haringey",
    code: "E09000014",
    meanIncomeByYear: {
      "1999": 20600, "2000": 24500, "2001": 28000, "2002": 26000, "2003": 26100,
      "2004": 27900, "2005": 29500, "2006": 32500, "2007": 31900, "2008": 33000, "2009": 35100,
      "2010": 32900, "2011": 34600, "2012": 35400, "2013": 39100, "2014": 39500,
      "2015": 41700, "2016": 39900, "2017": 43800, "2018": 46300, "2019": 48600,
      "2020": 50200, "2021": 57100, "2022": 54900, "2023": 58000
    },
    medianIncomeByYear: {
      "1999": 15000, "2000": 16600, "2001": 19100, "2002": 17100, "2003": 18800,
      "2004": 18300, "2005": 18800, "2006": 19000, "2007": 19800, "2008": 20500, "2009": 21800,
      "2010": 21500, "2011": 22200, "2012": 23300, "2013": 24400, "2014": 25800,
      "2015": 25600, "2016": 25100, "2017": 27100, "2018": 27400, "2019": 28300,
      "2020": 30000, "2021": 31300, "2022": 31800, "2023": 33500
    }
  },
  {
    borough: "Harrow",
    code: "E09000015",
    meanIncomeByYear: {
      "1999": 23300, "2000": 25700, "2001": 26500, "2002": 26900, "2003": 26300,
      "2004": 26800, "2005": 29200, "2006": 30800, "2007": 32400, "2008": 33000, "2009": 33300,
      "2010": 31100, "2011": 32400, "2012": 33300, "2013": 36000, "2014": 37000,
      "2015": 38500, "2016": 38400, "2017": 39000, "2018": 39300, "2019": 41500,
      "2020": 42800, "2021": 46500, "2022": 47100, "2023": 49500
    },
    medianIncomeByYear: {
      "1999": 16600, "2000": 19300, "2001": 19300, "2002": 19400, "2003": 19600,
      "2004": 19600, "2005": 20700, "2006": 21400, "2007": 22100, "2008": 22800, "2009": 22800,
      "2010": 22300, "2011": 23000, "2012": 24000, "2013": 25200, "2014": 26100,
      "2015": 26300, "2016": 27300, "2017": 27600, "2018": 27600, "2019": 29500,
      "2020": 30200, "2021": 32300, "2022": 33200, "2023": 35000
    }
  },
  {
    borough: "Havering",
    code: "E09000016",
    meanIncomeByYear: {
      "1999": 20400, "2000": 21400, "2001": 22200, "2002": 22700, "2003": 22800,
      "2004": 23100, "2005": 25000, "2006": 26100, "2007": 27100, "2008": 28000, "2009": 29700,
      "2010": 29000, "2011": 30400, "2012": 30600, "2013": 31300, "2014": 32100,
      "2015": 33600, "2016": 33900, "2017": 35700, "2018": 37100, "2019": 38100,
      "2020": 38000, "2021": 40000, "2022": 41900, "2023": 44000
    },
    medianIncomeByYear: {
      "1999": 14800, "2000": 17000, "2001": 17400, "2002": 18300, "2003": 18100,
      "2004": 18600, "2005": 20200, "2006": 20400, "2007": 20800, "2008": 22000, "2009": 22000,
      "2010": 22500, "2011": 22700, "2012": 23500, "2013": 24700, "2014": 24900,
      "2015": 26000, "2016": 26100, "2017": 27900, "2018": 29700, "2019": 29800,
      "2020": 29000, "2021": 29800, "2022": 32000, "2023": 34000
    }
  },
  {
    borough: "Hillingdon",
    code: "E09000017",
    meanIncomeByYear: {
      "1999": 21700, "2000": 20900, "2001": 23600, "2002": 24000, "2003": 23800,
      "2004": 25200, "2005": 26300, "2006": 27600, "2007": 27900, "2008": 28500, "2009": 29300,
      "2010": 28400, "2011": 30000, "2012": 30100, "2013": 31300, "2014": 32300,
      "2015": 33900, "2016": 34300, "2017": 35900, "2018": 36800, "2019": 37300,
      "2020": 38200, "2021": 41600, "2022": 42200, "2023": 44500
    },
    medianIncomeByYear: {
      "1999": 16100, "2000": 17100, "2001": 17600, "2002": 18800, "2003": 18900,
      "2004": 20400, "2005": 20200, "2006": 21200, "2007": 21800, "2008": 23000, "2009": 23000,
      "2010": 21900, "2011": 23500, "2012": 23200, "2013": 23600, "2014": 25300,
      "2015": 25900, "2016": 26200, "2017": 27100, "2018": 28100, "2019": 28100,
      "2020": 28400, "2021": 30600, "2022": 31900, "2023": 33500
    }
  },
  {
    borough: "Hounslow",
    code: "E09000018",
    meanIncomeByYear: {
      "1999": 20900, "2000": 22400, "2001": 23800, "2002": 24500, "2003": 24800,
      "2004": 25500, "2005": 26900, "2006": 27800, "2007": 29000, "2008": 30000, "2009": 31800,
      "2010": 30800, "2011": 32400, "2012": 32200, "2013": 35800, "2014": 36800,
      "2015": 38400, "2016": 39900, "2017": 40300, "2018": 42000, "2019": 41700,
      "2020": 43000, "2021": 45400, "2022": 46000, "2023": 48500
    },
    medianIncomeByYear: {
      "1999": 15200, "2000": 16600, "2001": 16500, "2002": 18600, "2003": 18900,
      "2004": 18400, "2005": 18800, "2006": 19100, "2007": 20400, "2008": 22000, "2009": 22000,
      "2010": 21600, "2011": 21800, "2012": 22400, "2013": 23700, "2014": 24700,
      "2015": 25000, "2016": 26100, "2017": 26400, "2018": 27800, "2019": 27500,
      "2020": 28500, "2021": 29300, "2022": 30600, "2023": 32000
    }
  },
  {
    borough: "Islington",
    code: "E09000019",
    meanIncomeByYear: {
      "1999": 31100, "2000": 30000, "2001": 33500, "2002": 36300, "2003": 36800,
      "2004": 35400, "2005": 39000, "2006": 41400, "2007": 43300, "2008": 45000, "2009": 48400,
      "2010": 47600, "2011": 47200, "2012": 48400, "2013": 51900, "2014": 56800,
      "2015": 58900, "2016": 59500, "2017": 62100, "2018": 63900, "2019": 66100,
      "2020": 70100, "2021": 76600, "2022": 76000, "2023": 80000
    },
    medianIncomeByYear: {
      "1999": 19900, "2000": 17600, "2001": 18700, "2002": 19100, "2003": 21500,
      "2004": 20800, "2005": 22800, "2006": 23100, "2007": 24400, "2008": 27100, "2009": 27100,
      "2010": 26100, "2011": 28100, "2012": 28500, "2013": 28700, "2014": 31000,
      "2015": 31100, "2016": 32900, "2017": 33400, "2018": 35100, "2019": 36400,
      "2020": 35600, "2021": 38200, "2022": 40300, "2023": 42500
    }
  },
  {
    borough: "Kensington and Chelsea",
    code: "E09000020",
    meanIncomeByYear: {
      "1999": 58200, "2000": 86500, "2001": 78900, "2002": 72900, "2003": 84900,
      "2004": 86600, "2005": 109000, "2006": 122000, "2007": 151000, "2008": 160000, "2009": 161000,
      "2010": 128000, "2011": 137000, "2012": 131000, "2013": 156000, "2014": 158000,
      "2015": 178000, "2016": 171000, "2017": 177000, "2018": 173000, "2019": 185000,
      "2020": 198000, "2021": 208000, "2022": 209000, "2023": 220000
    },
    medianIncomeByYear: {
      "1999": 18200, "2000": 25200, "2001": 25900, "2002": 25400, "2003": 24000,
      "2004": 22400, "2005": 27300, "2006": 27500, "2007": 31900, "2008": 34100, "2009": 34100,
      "2010": 31700, "2011": 37200, "2012": 37800, "2013": 37600, "2014": 38700,
      "2015": 37500, "2016": 39500, "2017": 40400, "2018": 39300, "2019": 42100,
      "2020": 43300, "2021": 43900, "2022": 47700, "2023": 50000
    }
  },
  {
    borough: "Kingston upon Thames",
    code: "E09000021",
    meanIncomeByYear: {
      "1999": 28400, "2000": 26400, "2001": 28400, "2002": 27900, "2003": 28300,
      "2004": 30500, "2005": 33400, "2006": 34300, "2007": 38200, "2008": 39200, "2009": 39200,
      "2010": 35500, "2011": 38700, "2012": 39900, "2013": 41900, "2014": 43600,
      "2015": 45800, "2016": 44500, "2017": 48700, "2018": 50300, "2019": 50500,
      "2020": 54000, "2021": 56500, "2022": 57300, "2023": 60000
    },
    medianIncomeByYear: {
      "1999": 20900, "2000": 18800, "2001": 19500, "2002": 20700, "2003": 20100,
      "2004": 20400, "2005": 22400, "2006": 22900, "2007": 25200, "2008": 25600, "2009": 25600,
      "2010": 24800, "2011": 26000, "2012": 26500, "2013": 26100, "2014": 29100,
      "2015": 30300, "2016": 30200, "2017": 32400, "2018": 33300, "2019": 33500,
      "2020": 34700, "2021": 35900, "2022": 37300, "2023": 39000
    }
  },
  {
    borough: "Lambeth",
    code: "E09000022",
    meanIncomeByYear: {
      "1999": 20700, "2000": 21900, "2001": 25600, "2002": 25900, "2003": 26600,
      "2004": 26800, "2005": 28700, "2006": 30900, "2007": 33300, "2008": 35400, "2009": 35400,
      "2010": 34200, "2011": 35700, "2012": 37600, "2013": 40600, "2014": 41100,
      "2015": 43700, "2016": 43900, "2017": 45600, "2018": 47500, "2019": 49100,
      "2020": 51900, "2021": 56100, "2022": 57900, "2023": 61000
    },
    medianIncomeByYear: {
      "1999": 15400, "2000": 15300, "2001": 18200, "2002": 18800, "2003": 20000,
      "2004": 19900, "2005": 20700, "2006": 21600, "2007": 22200, "2008": 24000, "2009": 24000,
      "2010": 24000, "2011": 24600, "2012": 26000, "2013": 26800, "2014": 27300,
      "2015": 28400, "2016": 29200, "2017": 29900, "2018": 31900, "2019": 31900,
      "2020": 32800, "2021": 34500, "2022": 35800, "2023": 38000
    }
  },
  {
    borough: "Lewisham",
    code: "E09000023",
    meanIncomeByYear: {
      "1999": 18200, "2000": 19400, "2001": 21600, "2002": 21400, "2003": 21500,
      "2004": 23100, "2005": 25200, "2006": 25800, "2007": 27100, "2008": 28700, "2009": 28700,
      "2010": 29300, "2011": 29800, "2012": 30400, "2013": 31500, "2014": 32400,
      "2015": 34500, "2016": 35900, "2017": 36800, "2018": 38000, "2019": 41100,
      "2020": 42600, "2021": 44800, "2022": 48300, "2023": 51000
    },
    medianIncomeByYear: {
      "1999": 14900, "2000": 15300, "2001": 18000, "2002": 17300, "2003": 17000,
      "2004": 18100, "2005": 20000, "2006": 20900, "2007": 21000, "2008": 22300, "2009": 22300,
      "2010": 23200, "2011": 22900, "2012": 23000, "2013": 24000, "2014": 24900,
      "2015": 25800, "2016": 26700, "2017": 27300, "2018": 27900, "2019": 30100,
      "2020": 30900, "2021": 32000, "2022": 34500, "2023": 36500
    }
  },
  {
    borough: "Merton",
    code: "E09000024",
    meanIncomeByYear: {
      "1999": 27900, "2000": 27900, "2001": 28900, "2002": 31600, "2003": 31300,
      "2004": 31600, "2005": 34800, "2006": 37200, "2007": 39400, "2008": 44000, "2009": 44000,
      "2010": 43100, "2011": 43700, "2012": 44400, "2013": 48700, "2014": 46900,
      "2015": 50800, "2016": 53200, "2017": 54600, "2018": 56300, "2019": 55300,
      "2020": 58500, "2021": 63000, "2022": 65600, "2023": 69000
    },
    medianIncomeByYear: {
      "1999": 19100, "2000": 18400, "2001": 18500, "2002": 21200, "2003": 19700,
      "2004": 19400, "2005": 20500, "2006": 21600, "2007": 22300, "2008": 24100, "2009": 24100,
      "2010": 24700, "2011": 25200, "2012": 25800, "2013": 27800, "2014": 27600,
      "2015": 28500, "2016": 29500, "2017": 30200, "2018": 30300, "2019": 30300,
      "2020": 32600, "2021": 33900, "2022": 36400, "2023": 38500
    }
  },
  {
    borough: "Newham",
    code: "E09000025",
    meanIncomeByYear: {
      "1999": 15800, "2000": 17000, "2001": 17700, "2002": 17300, "2003": 17400,
      "2004": 18500, "2005": 19200, "2006": 19600, "2007": 21000, "2008": 21900, "2009": 21900,
      "2010": 21700, "2011": 22000, "2012": 23100, "2013": 24800, "2014": 25400,
      "2015": 27300, "2016": 28200, "2017": 30000, "2018": 31000, "2019": 31700,
      "2020": 34300, "2021": 36100, "2022": 37200, "2023": 39000
    },
    medianIncomeByYear: {
      "1999": 13300, "2000": 14700, "2001": 15300, "2002": 15000, "2003": 14500,
      "2004": 15100, "2005": 15200, "2006": 15800, "2007": 16500, "2008": 17600, "2009": 17600,
      "2010": 17400, "2011": 17600, "2012": 18500, "2013": 20100, "2014": 20200,
      "2015": 22100, "2016": 22500, "2017": 24100, "2018": 24300, "2019": 24600,
      "2020": 26600, "2021": 28300, "2022": 28900, "2023": 30500
    }
  },
  {
    borough: "Redbridge",
    code: "E09000026",
    meanIncomeByYear: {
      "1999": 21700, "2000": 21700, "2001": 23800, "2002": 24000, "2003": 24100,
      "2004": 24500, "2005": 26500, "2006": 28300, "2007": 29100, "2008": 30200, "2009": 30200,
      "2010": 29400, "2011": 30900, "2012": 31800, "2013": 33100, "2014": 33900,
      "2015": 35300, "2016": 35500, "2017": 37100, "2018": 37100, "2019": 38500,
      "2020": 40300, "2021": 42700, "2022": 44200, "2023": 46500
    },
    medianIncomeByYear: {
      "1999": 17100, "2000": 16900, "2001": 17200, "2002": 18700, "2003": 19000,
      "2004": 17800, "2005": 20000, "2006": 20700, "2007": 21600, "2008": 22300, "2009": 22300,
      "2010": 22200, "2011": 22900, "2012": 23800, "2013": 25100, "2014": 25700,
      "2015": 26400, "2016": 27400, "2017": 28000, "2018": 27300, "2019": 28900,
      "2020": 30400, "2021": 31200, "2022": 31200, "2023": 33000
    }
  },
  {
    borough: "Richmond upon Thames",
    code: "E09000027",
    meanIncomeByYear: {
      "1999": 37300, "2000": 36700, "2001": 41500, "2002": 39500, "2003": 42700,
      "2004": 41800, "2005": 47500, "2006": 52500, "2007": 56900, "2008": 58900, "2009": 58900,
      "2010": 56300, "2011": 57400, "2012": 58800, "2013": 64000, "2014": 64600,
      "2015": 67300, "2016": 67000, "2017": 69000, "2018": 73800, "2019": 77400,
      "2020": 77900, "2021": 90400, "2022": 92200, "2023": 97000
    },
    medianIncomeByYear: {
      "1999": 20900, "2000": 21100, "2001": 23400, "2002": 23100, "2003": 25600,
      "2004": 24500, "2005": 25800, "2006": 27300, "2007": 29100, "2008": 30800, "2009": 30800,
      "2010": 30600, "2011": 31500, "2012": 33400, "2013": 33700, "2014": 35800,
      "2015": 35500, "2016": 36600, "2017": 36100, "2018": 37600, "2019": 38900,
      "2020": 39500, "2021": 44000, "2022": 45300, "2023": 48000
    }
  },
  {
    borough: "Southwark",
    code: "E09000028",
    meanIncomeByYear: {
      "1999": 20400, "2000": 22500, "2001": 25900, "2002": 24600, "2003": 25400,
      "2004": 26300, "2005": 29500, "2006": 31800, "2007": 36000, "2008": 36800, "2009": 36800,
      "2010": 35400, "2011": 36500, "2012": 37500, "2013": 40500, "2014": 41600,
      "2015": 44200, "2016": 45400, "2017": 48600, "2018": 49400, "2019": 53400,
      "2020": 55300, "2021": 57800, "2022": 59400, "2023": 62500
    },
    medianIncomeByYear: {
      "1999": 14600, "2000": 15400, "2001": 16900, "2002": 17900, "2003": 18200,
      "2004": 17800, "2005": 20000, "2006": 20400, "2007": 21900, "2008": 23300, "2009": 23300,
      "2010": 23800, "2011": 24300, "2012": 25000, "2013": 26200, "2014": 27700,
      "2015": 27100, "2016": 29400, "2017": 29400, "2018": 31400, "2019": 33500,
      "2020": 33900, "2021": 34400, "2022": 36200, "2023": 38000
    }
  },
  {
    borough: "Sutton",
    code: "E09000029",
    meanIncomeByYear: {
      "1999": 21000, "2000": 21900, "2001": 23100, "2002": 23700, "2003": 24600,
      "2004": 25600, "2005": 26300, "2006": 28400, "2007": 30000, "2008": 30000, "2009": 30000,
      "2010": 29100, "2011": 31400, "2012": 32400, "2013": 32800, "2014": 33600,
      "2015": 35400, "2016": 35500, "2017": 36900, "2018": 38500, "2019": 40200,
      "2020": 41400, "2021": 45200, "2022": 44400, "2023": 47000
    },
    medianIncomeByYear: {
      "1999": 16400, "2000": 17000, "2001": 17600, "2002": 17800, "2003": 18400,
      "2004": 18900, "2005": 20200, "2006": 21400, "2007": 22500, "2008": 23200, "2009": 23200,
      "2010": 22300, "2011": 25300, "2012": 25000, "2013": 25100, "2014": 25900,
      "2015": 27400, "2016": 27300, "2017": 28200, "2018": 29700, "2019": 30200,
      "2020": 31400, "2021": 33300, "2022": 33400, "2023": 35500
    }
  },
  {
    borough: "Tower Hamlets",
    code: "E09000030",
    meanIncomeByYear: {
      "1999": 22900, "2000": 25000, "2001": 29900, "2002": 28500, "2003": 28300,
      "2004": 29600, "2005": 31500, "2006": 33500, "2007": 37400, "2008": 38300, "2009": 38300,
      "2010": 37400, "2011": 38200, "2012": 39000, "2013": 40800, "2014": 41800,
      "2015": 45000, "2016": 46600, "2017": 46600, "2018": 49300, "2019": 50100,
      "2020": 52700, "2021": 55500, "2022": 57100, "2023": 60000
    },
    medianIncomeByYear: {
      "1999": 14200, "2000": 16500, "2001": 19100, "2002": 19300, "2003": 18300,
      "2004": 19200, "2005": 19800, "2006": 19400, "2007": 21200, "2008": 24500, "2009": 24500,
      "2010": 24000, "2011": 24700, "2012": 25800, "2013": 27000, "2014": 26600,
      "2015": 28900, "2016": 30500, "2017": 30200, "2018": 31100, "2019": 32700,
      "2020": 34100, "2021": 35500, "2022": 37300, "2023": 39000
    }
  },
  {
    borough: "Waltham Forest",
    code: "E09000031",
    meanIncomeByYear: {
      "1999": 18500, "2000": 19600, "2001": 20300, "2002": 20100, "2003": 20100,
      "2004": 20800, "2005": 22000, "2006": 23100, "2007": 23200, "2008": 24800, "2009": 24800,
      "2010": 24400, "2011": 25300, "2012": 26200, "2013": 27000, "2014": 28200,
      "2015": 29400, "2016": 30300, "2017": 31900, "2018": 33700, "2019": 34900,
      "2020": 37100, "2021": 40100, "2022": 41400, "2023": 43500
    },
    medianIncomeByYear: {
      "1999": 15000, "2000": 15100, "2001": 16600, "2002": 17200, "2003": 16800,
      "2004": 16600, "2005": 17700, "2006": 17900, "2007": 18200, "2008": 20600, "2009": 20600,
      "2010": 19700, "2011": 20300, "2012": 21400, "2013": 21900, "2014": 22700,
      "2015": 23900, "2016": 24500, "2017": 25500, "2018": 26800, "2019": 27700,
      "2020": 28900, "2021": 30900, "2022": 32500, "2023": 34000
    }
  },
  {
    borough: "Wandsworth",
    code: "E09000032",
    meanIncomeByYear: {
      "1999": 29300, "2000": 36300, "2001": 36000, "2002": 35700, "2003": 37800,
      "2004": 38200, "2005": 44100, "2006": 45400, "2007": 49500, "2008": 52800, "2009": 52800,
      "2010": 50700, "2011": 53400, "2012": 54700, "2013": 59900, "2014": 59200,
      "2015": 63600, "2016": 64900, "2017": 67900, "2018": 70400, "2019": 72400,
      "2020": 75300, "2021": 79700, "2022": 81500, "2023": 86000
    },
    medianIncomeByYear: {
      "1999": 18100, "2000": 21000, "2001": 21700, "2002": 22000, "2003": 22600,
      "2004": 22000, "2005": 24500, "2006": 25300, "2007": 26100, "2008": 29200, "2009": 29200,
      "2010": 29000, "2011": 29400, "2012": 31000, "2013": 31900, "2014": 32900,
      "2015": 34200, "2016": 35000, "2017": 34500, "2018": 37100, "2019": 38900,
      "2020": 39000, "2021": 40200, "2022": 42200, "2023": 44500
    }
  },
  {
    borough: "Westminster",
    code: "E09000033",
    meanIncomeByYear: {
      "1999": 46400, "2000": 49100, "2001": 55600, "2002": 56600, "2003": 57500,
      "2004": 56500, "2005": 68100, "2006": 73600, "2007": 82600, "2008": 93500, "2009": 93500,
      "2010": 83400, "2011": 88200, "2012": 92200, "2013": 107000, "2014": 104000,
      "2015": 109000, "2016": 107000, "2017": 124000, "2018": 120000, "2019": 118000,
      "2020": 123000, "2021": 133000, "2022": 133000, "2023": 140000
    },
    medianIncomeByYear: {
      "1999": 17300, "2000": 23000, "2001": 21900, "2002": 22800, "2003": 23500,
      "2004": 23100, "2005": 27100, "2006": 27000, "2007": 29200, "2008": 31900, "2009": 31900,
      "2010": 31400, "2011": 32400, "2012": 35200, "2013": 36400, "2014": 35100,
      "2015": 37800, "2016": 36100, "2017": 39700, "2018": 39200, "2019": 39900,
      "2020": 42100, "2021": 41200, "2022": 42600, "2023": 45000
    }
  }
];

// Function to get all income data
export function getAllIncomeData(): IncomeData[] {
  return incomeDataRaw;
}

// Function to get income data for a specific borough
export function getIncomeDataForBorough(borough: string): IncomeData | undefined {
  return incomeDataRaw.find(data => 
    data.borough.toLowerCase() === borough.toLowerCase()
  );
}

// Function to get income timeline data for a specific borough
export function getIncomeTimelineDataForBorough(borough: string): IncomeTimelineData[] {
  const boroughData = getIncomeDataForBorough(borough);
  if (!boroughData) return [];

  return Object.entries(boroughData.meanIncomeByYear).map(([year, meanIncome]) => ({
    year,
    meanIncome,
    medianIncome: boroughData.medianIncomeByYear[year] || 0,
    borough: boroughData.borough
  })).sort((a, b) => parseInt(a.year) - parseInt(b.year));
}

// Function to get current year mean income for a borough
export function getCurrentMeanIncome(borough: string): number {
  const boroughData = getIncomeDataForBorough(borough);
  if (!boroughData) return 0;
  
  // Get the most recent year available (2023)
  return boroughData.meanIncomeByYear["2023"] || 0;
}

// Function to get current year median income for a borough
export function getCurrentMedianIncome(borough: string): number {
  const boroughData = getIncomeDataForBorough(borough);
  if (!boroughData) return 0;
  
  // Get the most recent year available (2023)
  return boroughData.medianIncomeByYear["2023"] || 0;
}

// Function to get all London boroughs mean income for a specific year
export function getAllBoroughsIncomeForYear(year: string): { borough: string; meanIncome: number; medianIncome: number }[] {
  return incomeDataRaw.map(data => ({
    borough: data.borough,
    meanIncome: data.meanIncomeByYear[year] || 0,
    medianIncome: data.medianIncomeByYear[year] || 0
  })).filter(data => data.meanIncome > 0);
}

// Function to format income values
export function formatIncome(income: number): string {
  if (income >= 1000000) {
    return `£${(income).toFixed(1)}`;
  } else if (income >= 1000) {
    return `£${(income).toFixed(0)}`;
  } else {
    return `£${income.toLocaleString()}`;
  }
}

// Function to calculate income change percentage
export function getIncomeChangePercentage(borough: string, fromYear: string, toYear: string, type: 'mean' | 'median' = 'mean'): number {
  const boroughData = getIncomeDataForBorough(borough);
  if (!boroughData) return 0;

  const incomeByYear = type === 'mean' ? boroughData.meanIncomeByYear : boroughData.medianIncomeByYear;
  const fromIncome = incomeByYear[fromYear];
  const toIncome = incomeByYear[toYear];

  if (!fromIncome || !toIncome) return 0;

  return ((toIncome - fromIncome) / fromIncome) * 100;
}

// Function to get London average income for a year
export function getLondonAverageIncome(year: string, type: 'mean' | 'median' = 'mean'): number {
  const allIncomes = getAllBoroughsIncomeForYear(year);
  if (allIncomes.length === 0) return 0;

  const total = allIncomes.reduce((sum, data) => 
    sum + (type === 'mean' ? data.meanIncome : data.medianIncome), 0);
  return Math.round(total / allIncomes.length);
}
