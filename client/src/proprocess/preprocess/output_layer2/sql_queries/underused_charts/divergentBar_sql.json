{
  "chart_type": "divergentBar",
  "category": "chart_specific_analysis",
  "processed_at": "2025-08-20T18:08:41.904Z",
  "total_queries": 25,
  "sql_queries": [
    {
      "proposition_id": "crime-rates_crime_category_divergentBarChart_simple_2D_001",
      "dataset": "crime-rates",
      "time_period": "2023",
      "variables_needed": [
        "borough_name",
        "crime_category",
        "year",
        "crime_category_name"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT crime_category AS category, SUM(CASE WHEN count >= 0 THEN count ELSE 0 END) AS positive_value, SUM(CASE WHEN count < 0 THEN count ELSE 0 END) AS negative_value FROM crime_data WHERE YEAR(date) = 2023 GROUP BY crime_category ORDER BY category;"
    },
    {
      "proposition_id": "income_wage_trends_divergentBarChart_with_mean_2D_002",
      "dataset": "income",
      "time_period": "2020-2023",
      "variables_needed": [
        "borough_name",
        "year",
        "income"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT borough_name AS category, AVG(CASE WHEN income_level = 'high' THEN average_income ELSE 0 END) AS positive_value, AVG(CASE WHEN income_level = 'low' THEN average_income ELSE 0 END) AS negative_value FROM income_data WHERE date BETWEEN '2020-01-01' AND '2023-12-31' GROUP BY borough_name ORDER BY borough_name;"
    },
    {
      "proposition_id": "house-prices_property_value_divergentBarChart_with_threshold_2D_003",
      "dataset": "house-prices",
      "time_period": "2023",
      "variables_needed": [
        "borough_name",
        "year",
        "value"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT borough_name AS category, AVG(CASE WHEN average_price >= 0 THEN average_price ELSE 0 END) AS positive_value, AVG(CASE WHEN average_price < 0 THEN average_price ELSE 0 END) AS negative_value FROM house_price_data WHERE YEAR(date) = 2023 GROUP BY borough_name ORDER BY category;"
    },
    {
      "proposition_id": "vehicles_registration_trends_divergentBarChart_simple_3D_004",
      "dataset": "vehicles",
      "time_period": "2023",
      "variables_needed": [
        "Local Authority",
        "year",
        "Cars",
        "Electric"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT borough_name AS category, SUM(CASE WHEN vehicle_type = 'Cars' THEN registration_count ELSE 0 END) AS positive_value, SUM(CASE WHEN vehicle_type = 'Electric' THEN registration_count ELSE 0 END) AS negative_value, 'year' AS dimension FROM vehicle_data WHERE date LIKE '2023%' GROUP BY borough_name ORDER BY borough_name;"
    },
    {
      "proposition_id": "ethnicity_population_distribution_divergentBarChart_with_mean_2D_005",
      "dataset": "ethnicity",
      "time_period": "Not applicable",
      "variables_needed": [
        "local authority name",
        "All usual residents",
        "Asian"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN ethnic_group = 'Asian' THEN population_count ELSE 0 END) AS positive_value, SUM(CASE WHEN ethnic_group != 'Asian' THEN population_count ELSE 0 END) AS negative_value FROM ethnicity_data GROUP BY area_name ORDER BY area_name;"
    },
    {
      "proposition_id": "gyms_facility_growth_divergentBarChart_simple_3D_006",
      "dataset": "gyms",
      "time_period": "2024",
      "variables_needed": [
        "borough_name",
        "year",
        "facility_count"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT borough_name AS category, SUM(CASE WHEN facility_type = 'positive' THEN 1 ELSE 0 END) AS positive_value, SUM(CASE WHEN facility_type = 'negative' THEN 1 ELSE 0 END) AS negative_value, '2024' AS dimension FROM gym_data WHERE EXTRACT(YEAR FROM CURRENT_DATE) = 2024 GROUP BY borough_name ORDER BY borough_name;"
    },
    {
      "proposition_id": "libraries_visitation_trends_divergentBarChart_with_threshold_2D_007",
      "dataset": "libraries",
      "time_period": "2023",
      "variables_needed": [
        "area",
        "Library visits per 1,000 population"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(visitor_count) / (SUM(visitor_count) + SUM(book_count)) * 1000 AS positive_value, SUM(book_count) / (SUM(visitor_count) + SUM(book_count)) * 1000 AS negative_value FROM library_data WHERE EXTRACT(YEAR FROM date) = 2023 GROUP BY area_name ORDER BY category;"
    },
    {
      "proposition_id": "restaurants_employment_divergentBarChart_with_mean_2D_008",
      "dataset": "restaurants",
      "time_period": "2023",
      "variables_needed": [
        "Area name",
        "employment"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN restaurant_count >= (SELECT AVG(restaurant_count) FROM restaurant_data WHERE EXTRACT(YEAR FROM date) = 2023) THEN restaurant_count ELSE 0 END) AS positive_value, SUM(CASE WHEN restaurant_count < (SELECT AVG(restaurant_count) FROM restaurant_data WHERE EXTRACT(YEAR FROM date) = 2023) THEN restaurant_count ELSE 0 END) AS negative_value FROM restaurant_data WHERE EXTRACT(YEAR FROM date) = 2023 GROUP BY area_name ORDER BY area_name;"
    },
    {
      "proposition_id": "population_density_trends_divergentBarChart_simple_2D_009",
      "dataset": "population",
      "time_period": "2010-2021",
      "variables_needed": [
        "area",
        "year",
        "population_density"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN population_count >= 0 THEN population_count ELSE 0 END) AS positive_value, SUM(CASE WHEN population_count < 0 THEN population_count ELSE 0 END) AS negative_value FROM population_data WHERE date BETWEEN '2010-01-01' AND '2021-12-31' GROUP BY area_name ORDER BY area_name;"
    },
    {
      "proposition_id": "private-rent_market_shifts_divergentBarChart_simple_3D_010",
      "dataset": "private-rent",
      "time_period": "2020-2023",
      "variables_needed": [
        "Area",
        "year",
        "Average (Â£)"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT area_name AS category, AVG(CASE WHEN EXTRACT(YEAR FROM date) = 2020 THEN average_rent ELSE NULL END) AS positive_value, AVG(CASE WHEN EXTRACT(YEAR FROM date) = 2021 THEN average_rent ELSE NULL END) AS negative_value, EXTRACT(YEAR FROM date) AS dimension FROM rent_data WHERE date BETWEEN '2020-01-01' AND '2023-12-31' GROUP BY area_name, EXTRACT(YEAR FROM date) ORDER BY area_name, dimension;"
    },
    {
      "proposition_id": "schools-colleges_performance_divergentBarChart_with_mean_2D_011",
      "dataset": "schools-colleges",
      "time_period": "2021-2023",
      "variables_needed": [
        "LANAME",
        "school_performance"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT LANAME AS category, AVG(CASE WHEN school_performance >= 0 THEN school_performance ELSE NULL END) AS positive_value, AVG(CASE WHEN school_performance < 0 THEN school_performance ELSE NULL END) AS negative_value FROM ( SELECT borough_name AS LANAME, rating AS school_performance FROM education_data WHERE institution_type IN ('school', 'college') AND date BETWEEN '2021-01-01' AND '2023-12-31' ) AS subquery GROUP BY LANAME ORDER BY category;"
    },
    {
      "proposition_id": "country-of-births_demographics_divergentBarChart_simple_3D_012",
      "dataset": "country-of-births",
      "time_period": "2023",
      "variables_needed": [
        "Area_Name",
        "Broad_group",
        "Estimate"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN population_count >= 0 THEN population_count ELSE 0 END) AS positive_value, SUM(CASE WHEN population_count < 0 THEN population_count ELSE 0 END) AS negative_value, country_of_birth AS dimension FROM birth_country_data WHERE EXTRACT(YEAR FROM date) = 2023 GROUP BY area_name, country_of_birth ORDER BY area_name, country_of_birth;"
    },
    {
      "proposition_id": "crime-rates_seasonal_variations_divergentBarChart_simple_2D_013",
      "dataset": "crime-rates",
      "time_period": "2022-2023",
      "variables_needed": [
        "borough_name",
        "month",
        "crime_category"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT crime_category AS category, SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN count ELSE 0 END) AS positive_value, SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2022 THEN count ELSE 0 END) AS negative_value FROM crime_data WHERE date BETWEEN '2022-01-01' AND '2023-12-31' GROUP BY crime_category ORDER BY crime_category;"
    },
    {
      "proposition_id": "income_inequality_trends_divergentBarChart_with_threshold_2D_014",
      "dataset": "income",
      "time_period": "2019-2023",
      "variables_needed": [
        "year",
        "income",
        "inequality_index"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT year AS category, AVG(CASE WHEN inequality_index >= 0 THEN income ELSE 0 END) AS positive_value, AVG(CASE WHEN inequality_index < 0 THEN income ELSE 0 END) AS negative_value FROM ( SELECT EXTRACT(YEAR FROM date) AS year, average_income AS income, inequality_index FROM income_data WHERE date BETWEEN '2019-01-01' AND '2023-12-31' ) AS subquery GROUP BY year ORDER BY year;"
    },
    {
      "proposition_id": "house-prices_market_fluctuations_divergentBarChart_simple_2D_015",
      "dataset": "house-prices",
      "time_period": "2019-2023",
      "variables_needed": [
        "borough_name",
        "year",
        "value"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT borough_name AS category, AVG(CASE WHEN EXTRACT(YEAR FROM date) BETWEEN 2019 AND 2023 THEN average_price ELSE NULL END) AS positive_value, AVG(CASE WHEN EXTRACT(YEAR FROM date) BETWEEN 2019 AND 2023 THEN -average_price ELSE NULL END) AS negative_value FROM house_price_data WHERE EXTRACT(YEAR FROM date) BETWEEN 2019 AND 2023 GROUP BY borough_name ORDER BY borough_name;"
    },
    {
      "proposition_id": "vehicles_transport_trends_divergentBarChart_with_mean_2D_016",
      "dataset": "vehicles",
      "time_period": "2020-2023",
      "variables_needed": [
        "Local Authority",
        "year",
        "Motor cycles"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT \"Local Authority\" AS category, AVG(CASE WHEN registration_count > 0 THEN registration_count ELSE 0 END) AS positive_value, AVG(CASE WHEN registration_count < 0 THEN registration_count ELSE 0 END) AS negative_value FROM vehicle_data WHERE vehicle_type = 'Motor cycles' AND date BETWEEN '2020-01-01' AND '2023-12-31' GROUP BY \"Local Authority\" ORDER BY \"Local Authority\";"
    },
    {
      "proposition_id": "libraries_usage_decline_divergentBarChart_simple_2D_017",
      "dataset": "libraries",
      "time_period": "2020-2023",
      "variables_needed": [
        "area",
        "year",
        "Library visits per 1,000 population"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN EXTRACT(YEAR FROM date) BETWEEN 2020 AND 2023 THEN visitor_count ELSE 0 END) AS positive_value, -SUM(CASE WHEN EXTRACT(YEAR FROM date) BETWEEN 2020 AND 2023 THEN visitor_count ELSE 0 END) AS negative_value FROM library_data WHERE EXTRACT(YEAR FROM date) BETWEEN 2020 AND 2023 GROUP BY area_name ORDER BY area_name;"
    },
    {
      "proposition_id": "gyms_facility_concentration_divergentBarChart_with_threshold_2D_018",
      "dataset": "gyms",
      "time_period": "2024",
      "variables_needed": [
        "borough_name",
        "facility_count",
        "threshold"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT borough_name AS category, SUM(CASE WHEN facility_count >= threshold THEN facility_count ELSE 0 END) AS positive_value, SUM(CASE WHEN facility_count < threshold THEN facility_count ELSE 0 END) AS negative_value FROM gym_data WHERE EXTRACT(YEAR FROM date) = 2024 GROUP BY borough_name ORDER BY category;"
    },
    {
      "proposition_id": "restaurants_unit_growth_divergentBarChart_simple_3D_019",
      "dataset": "restaurants",
      "time_period": "2018-2023",
      "variables_needed": [
        "Area name",
        "year",
        "unit_growth"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT area_name AS category, SUM(CASE WHEN year >= 2018 AND year <= 2023 THEN unit_growth ELSE 0 END) AS positive_value, SUM(CASE WHEN year < 2018 THEN unit_growth ELSE 0 END) AS negative_value, year AS dimension FROM ( SELECT area_name, EXTRACT(YEAR FROM date) AS year, restaurant_count - LAG(restaurant_count, 1, 0) OVER (PARTITION BY area_name ORDER BY date) AS unit_growth FROM restaurant_data WHERE EXTRACT(YEAR FROM date) BETWEEN 2017 AND 2023 ) AS growth_data WHERE year BETWEEN 2018 AND 2023 GROUP BY area_name, year ORDER BY area_name, year;"
    },
    {
      "proposition_id": "population_age_shifts_divergentBarChart_with_mean_2D_020",
      "dataset": "population",
      "time_period": "2023",
      "variables_needed": [
        "area",
        "year",
        "elderly_population"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT area_name AS category, AVG(CASE WHEN age_group = '65+' THEN population_count ELSE 0 END) AS positive_value, AVG(CASE WHEN age_group != '65+' THEN population_count ELSE 0 END) AS negative_value FROM population_data WHERE date = '2023' GROUP BY area_name ORDER BY area_name;"
    },
    {
      "proposition_id": "country-of-births_diversity_patterns_divergentBarChart_with_threshold_2D_021",
      "dataset": "country-of-births",
      "time_period": "2023",
      "variables_needed": [
        "Area_Name",
        "Broad_group",
        "diversity_index"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT Area_Name AS category, SUM(CASE WHEN diversity_index >= 0 THEN diversity_index ELSE 0 END) AS positive_value, SUM(CASE WHEN diversity_index < 0 THEN diversity_index ELSE 0 END) AS negative_value FROM birth_country_data WHERE EXTRACT(YEAR FROM date) = 2023 GROUP BY Area_Name ORDER BY Area_Name;"
    },
    {
      "proposition_id": "private-rent_affordability_trends_divergentBarChart_simple_2D_022",
      "dataset": "private-rent",
      "time_period": "2020-2023",
      "variables_needed": [
        "Area",
        "year",
        "affordability_index"
      ],
      "chart_type": "divergentBarChart_simple_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT Area AS category, MAX(CASE WHEN affordability_index >= 0 THEN affordability_index ELSE 0 END) AS positive_value, MAX(CASE WHEN affordability_index < 0 THEN affordability_index ELSE 0 END) AS negative_value FROM rent_data WHERE date BETWEEN '2020-01-01' AND '2023-12-31' GROUP BY Area ORDER BY Area;"
    },
    {
      "proposition_id": "schools-colleges_enrollment_trends_divergentBarChart_with_mean_2D_023",
      "dataset": "schools-colleges",
      "time_period": "2021-2023",
      "variables_needed": [
        "LANAME",
        "year",
        "enrollment"
      ],
      "chart_type": "divergentBarChart_with_mean_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT LANAME AS category, AVG(CASE WHEN year BETWEEN 2021 AND 2023 THEN enrollment ELSE 0 END) AS positive_value, AVG(CASE WHEN year BETWEEN 2021 AND 2023 THEN -enrollment ELSE 0 END) AS negative_value FROM education_data WHERE year BETWEEN 2021 AND 2023 GROUP BY LANAME ORDER BY LANAME;"
    },
    {
      "proposition_id": "crime-rates_category_shifts_divergentBarChart_simple_3D_024",
      "dataset": "crime-rates",
      "time_period": "2022-2023",
      "variables_needed": [
        "borough_name",
        "month",
        "crime_category"
      ],
      "chart_type": "divergentBarChart_simple_3D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0,
          "dimension": ""
        }
      ],
      "sql_query": "SELECT crime_category AS category, SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2022 THEN count ELSE 0 END) AS positive_value, SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN count ELSE 0 END) AS negative_value, borough_name AS dimension FROM crime_data WHERE date BETWEEN '2022-01-01' AND '2023-12-31' GROUP BY crime_category, borough_name ORDER BY category, dimension;"
    },
    {
      "proposition_id": "house-prices_affordability_shifts_divergentBarChart_with_threshold_2D_025",
      "dataset": "house-prices",
      "time_period": "2023",
      "variables_needed": [
        "borough_name",
        "year",
        "affordability_index"
      ],
      "chart_type": "divergentBarChart_with_threshold_2D",
      "example": [
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        },
        {
          "category": "",
          "positive_value": 0,
          "negative_value": 0
        }
      ],
      "sql_query": "SELECT borough_name AS category, AVG(CASE WHEN affordability_index >= 0 THEN affordability_index ELSE 0 END) AS positive_value, AVG(CASE WHEN affordability_index < 0 THEN affordability_index ELSE 0 END) AS negative_value FROM ( SELECT borough_name, EXTRACT(YEAR FROM date) AS year, (average_price / median_income) AS affordability_index FROM house_price_data JOIN income_data ON house_price_data.borough_name = income_data.borough_name WHERE EXTRACT(YEAR FROM house_price_data.date) = 2023 AND EXTRACT(YEAR FROM income_data.date) = 2023 ) AS affordability_data GROUP BY borough_name ORDER BY category;"
    }
  ]
}